\input{macro}
\article{10}{1.1}
\pdflatex

\usepackage{algorithmic}

%\usepackage{fancyvrb}
%\fvset{fontsize=\footnotesize,numbers=left,xleftmargin=5ex}
\graphicspath{{pics/}}

\title{MLR How Tos}

\begin{document}
\maketitle
{\bigskip\hrule\vspace*{-3ex}\small\tableofcontents\medskip\hrule}

\section{LaTeX Conventions}

\subsection{References}

\begin{code}
\begin{verbatim}
\usepackage[round]{natbib}
\bibliographystyle{abbrvnat}
\end{verbatim}
\end{code}

\subsection{Generating figures / graphical models}

\begin{enumerate}

\item Use Inkscape. See the example mdp.svg in the pics path (note
the \verb+\graphicspath{{pics/}}+ command):

\centerline{\includegraphics[scale=.5]{mdp}}


  Use the 'Tex Text' plugin. Use layers to generate animations. Use
  `save a copy' to export as pdf (potentially with some layers
  switched off)

\item Use xfig with 'special tag' text. Use the following fig2pdf script to
  convert:

\begin{code}
\begin{verbatim}
rm -f $1.pdf
rm -f $1.tex
fig2dev -Lpdftex -p $* $1.fig $1.pdf
fig2dev -Lpstex_t -p $* $1.fig $1.tex

cp $HOME/write/tex/figs/header.tex z.tex
printf "%s\n" "\\input{$1.tex}" >> z.tex
printf "%s\n" "\\end{document}" >> z.tex
more z.tex
pdflatex z.tex
pdfcrop z.pdf $1.pdf
\end{verbatim}
\end{code}
\end{enumerate}



\subsection{Space tricks}

Be creating in using any of the following\\
\begin{code}
\begin{verbatim}
  \renewcommand{\baselinestretch}{.98}
  \renewcommand{\arraystretch}{1.2}
  \renewcommand{\textfloatsep}{3ex}
  \renewcommand{\floatpagefraction}{.6}
  \renewcommand{\dblfloatpagefraction}{.6}
  \setlength{\mathindent}{2.5em}
  \setlength{\jot}{0pt} %zwischen den math zeilen
  \setlength{\abovedisplayskip}{-10pt}
  \setlength{\belowdisplayskip}{-10pt}
  \setlength{\mathsurround}{-10pt}
  \renewcommand{\floatsep}{-1ex}
  \renewcommand{\topfraction}{1}
  \renewcommand{\bottomfraction}{1}
  \renewcommand{\textfraction}{0}
  \columnsep 5ex
  \parindent 3ex
  \parskip 1ex
\end{verbatim}
\end{code}

Or more compact lists:\\
\begin{code}
\begin{verbatim}
\begin{list}{--}{\leftmargin4ex \rightmargin0ex \labelsep1ex
  \labelwidth2ex \topsep-\parskip \parsep.5ex \itemsep0pt}
\item ...
\item ...
\end{list}
\end{verbatim}
\end{code}

The \verb+list+ parameter documentation:\\
\begin{code}
\begin{verbatim}
   * \topsep amount of extra vertical space at top of list
   * \partopsep extra length at top if environment is prececed by a blank line (it should be a rubber length)
   * \itemsep amount of extra vertical space between items
   * \parsep amount of vertical space between paragraphs within an item
   * \leftmargin horizontal distance between the left margins of the environment and the list; must be nonnegative
   * \rightmargin horizontal distance betwen the right margins of the enviroment and the list; must be nonnegative
   * \listparindent amount of extra space for paragraph indent after the first in an item; can be negative
   * \itemindent indentation of first line of an item; can be negative
   * \labelsep separation between end of the box containing the label and the text of the first line of an item
   * \labelwidth normal width of the box containing the label; if the actual label is bigger, the natural width is used, extending into the space for the first line of the item's text
   * \makelabel{label} generates the label printed by the \item command
\end{verbatim}
\end{code}

\subsection{Generating pseudo code}

See Algorithm \ref{algGN}

\begin{algorithm}[ht]
\caption{Gauss-Newton with adaptive Levenberg Marquardt parameter}
\label{algGN}
\begin{algorithmic}[1]\small
\REQUIRE start point $x$, tolerance $\delta$, routines for $x \mapsto
  (\phi(x), J(x))$
\ENSURE converged point $x$
\STATE initialize $\lambda=1$
\STATE compute $(\phi, J)$ at $x$ and $l=\phi^\T \phi$
\REPEAT
\STATE\label{redo} compute $\Delta$ to solve $(J^\T J +\lambda \Id)~ \Delta = - \sum
J^\T \phi$
\STATE $x' \gets x + \Delta$
\STATE compute $(\phi, J)$ at $x'$ and $l'=\phi^\T \phi$
\IF{$l'>l$}
\STATE $\lambda \gets 2\lambda$
\ELSE
\STATE $\lambda \gets 0.8\lambda$
\STATE $x \gets x'$
\ENDIF
\UNTIL $|\Delta| < \delta$
\end{algorithmic}
\end{algorithm}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Coding Conventions}

\begin{enumerate}
\item Take the Google C++ style as default:
  \url{http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml}.
  The rules below overwrite Google conventions.

\item Output parameters before input parameters in function declarations.

\item Naming convention \verb+name_of_a_routine(ouput,input);+ is
  perhaps better than my old \verb+nameOfARoutine(..);+ style.

\item Make headers as clean and short and concise as possible!

\item Try to avoid \verb+#includes+ in header files as much as possible!!
  In particular, when a class's methods require an external library;
  this external library should be included only in the cpp-file.

 $\to$ In particular, try to avoid \verb+#includes <external_lib>+ in headers!! (I
 tried to get rid of them as much as possible in all my *.h)

\item Try to avoid \verb+#includes+ in header files as much as possible!!
  If
  you think the class needs to contain members/data structures defined
  in an external library and therefore you need to include its header
  in your header --- that's often not true. Instead, hide all members
  in a \emph{``hidden self''}:

Bad example:

\begin{code}
\begin{verbatim}
//h-file:
#include <OpenCV> //BAD

struct MyClass{
  OpenCV_DataStructure data;
};
\end{verbatim}
\end{code}

Good example:

\begin{code}
\begin{verbatim}
//h-file:

struct sMyClass; //forward declaration of a 'hidden self' that will
contain all members hidden from the header

struct MyClass{
  sMyClass *s; //maybe call it 'self' instead
};

//cpp-file:
#include <OpenCV> //GOOD

struct sMyClass{
  OpenCV_DataStructure data;
};

MyClass::MyClass(){
  s = new sMyClass;
}
\end{verbatim}
\end{code}

\item Move documentation to cpp files. Advantages: You can write as
  long and lengthy documentation as you want without destroying the
  beauty of the header. Doxygen will compile this without problem to
  provide a nice documentation. If people want to read the
  documentation from source directly---it's not much of a hassle to
  find the definition in the cpp file.


\item Never ever use \verb+#ifdef+ directives in a header file if this
  influences definition of classes, especially which members (and
  'size') a class has!

  The following debugging horror may happen: You define a class to
  have different members depending on a compiler flag. You compile
  your library with some compiler flags. The user includes your header
  with other compiler flags. Everything seems to compile and link
  fine. But when the user accesses members of the class, he actually
  refers to different memory addesses as your routines in your
  library.

  Therefore try to avoid \verb+#ifdefs+ in headers as much as possible! Move
  them to the cpp file!

\item If you don't have a preferred IDE, use kdevelop.

  K\&R formatting conventions!

  Editing: use spaces instead of tabs. 2 characters. Identation with 2
  characters.

  Keys: F10,11,12: step, step in, step out, F9: toggle break\\
  F8 clean, F7 build, F5 debug run, CtrlF5 run, F6 continue


\item fltk lists their conventions -- I like them, also
  their style of formatting and their makefile conventions

\end{enumerate}



\end{document}
